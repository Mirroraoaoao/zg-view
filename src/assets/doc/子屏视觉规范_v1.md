## 子屏视觉规范 v1

### 版本信息
- 版本：v1
- 日期：2026-02-05
- 适用范围：集团经营管理大屏子屏（Vue 页面）
- 当前运行主题：`theme-dark-space`（深色主题）

### 设计目标
- 保持信息可读性优先，避免内容遮挡。
- 通过层次区分主次，避免所有卡片同权重。
- 保持风格统一，减少页面间视觉跳变。

### 固定协作规则
- 每个子屏最多 `2` 个磨砂重点卡。
- 非重点卡默认使用 `极轻薄`。
- 布局策略按指标密度动态选择。
- 不改模块，不改指标项，仅优化展示结构与样式。

### 层次模型
- L0（页面底）：`panel` 外层主面板，负责区块分组。
- L1（内容容器）：普通子卡，默认极轻薄。
- L2（重点容器）：重点指标卡，使用磨砂底色与轻高亮边框。

### 变量与档位（当前基线）
- 非重点卡（极轻薄）：`--subscreen-subcard-bg`
- 区域容器（普通层）：`--subscreen-card-bg`
- 重点磨砂卡：`--subscreen-ring-bg`

当前深色主题基线值（`src/assets/styles/themes.scss`）：
- `--subscreen-subcard-bg: rgba(32, 78, 108, 0.1);`
- `--subscreen-card-bg: linear-gradient(180deg, rgba(34, 86, 116, 0.4), rgba(20, 64, 92, 0.26));`
- `--subscreen-ring-bg: linear-gradient(160deg, rgba(40, 98, 128, 0.46), rgba(24, 70, 98, 0.32));`

### 重点项判定规则
- 优先判定为重点项的内容：
- 模块主 KPI（主金额、主比例、主完成率）。
- 当前页核心口径的第一指标。
- 需要用户第一眼识别的状态项（如“待明细”“完成率”）。

- 不判定为重点项的内容：
- 列表行、明细行、辅助说明行。
- 普通统计卡（非主指标）。
- 同类重复卡中非首位卡。

### 间距与防遮挡规范
- 面板内必须设置 `min-height: 0`（防止 Grid 子项溢出）。
- 可增长区域必须设置 `overflow: auto`（列表、明细、进度组）。
- 图表容器建议最小高度：`140px ~ 220px`，根据屏高自适应。
- 标题与正文间距优先压缩，不优先压缩数据文本字号。

### 布局策略（按指标密度）
- 指标少（<= 4）：
- 增加留白与视觉聚焦，强化 1-2 个重点卡。

- 指标中等（5~10）：
- 采用双列或 2xN 网格，重点卡仅首位或核心项。

- 指标多（> 10）：
- 优先信息密度，分区容器 + 内部滚动，减少装饰干扰。

### 页面改造流程
1. 先锁定“不改项”：模块结构、字段绑定、指标口径。
2. 设定重点项（最多 2 个）。
3. 应用层次变量：非重点 `subscreen-subcard-bg`，重点 `subscreen-ring-bg`。
4. 处理防遮挡：`min-height: 0` + `overflow: auto` + 图表最小高度。
5. 执行构建验证：`npm run build`。

### 验收清单
- 无文本遮挡、无图表溢出、无卡片裁剪。
- 重点卡数量 <= 2。
- 非重点卡全部为极轻薄层。
- 不存在新增指标或模块改动。
- 1080p 下可完整浏览核心内容。

### 代码片段（推荐）
```scss
.section-panel {
  min-height: 0;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  background: var(--subscreen-card-bg);
}

.item-card {
  min-height: 0;
  background: var(--subscreen-subcard-bg);
  border: 1px solid rgba(90, 204, 255, 0.1);
}

.item-card.is-focus {
  background: var(--subscreen-ring-bg);
  border-color: rgba(90, 204, 255, 0.22);
}

.scroll-area {
  min-height: 0;
  overflow: auto;
}
```
